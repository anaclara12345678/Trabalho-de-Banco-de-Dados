<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Relatório de Ocupação por Curso</title>

<style>
  :root{
    --blue-1:#022c73;
    --blue-2:#004aad;
    --accent:#FFC928;
    --bg:#f3f4f6;
  }

  *{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:"Segoe UI", Arial, sans-serif;
  }

  body{
    background:var(--bg);
    height:100vh;
    display:flex;
    flex-direction:column;
  }

  header{
    background:linear-gradient(90deg, var(--blue-1), var(--blue-2));
    padding:20px 32px;
    color:white;
  }

  header h1{
    font-size:28px;
    font-weight:700;
  }

  main{
    flex:1;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    padding:40px 20px;
  }

  .card{
    background:white;
    padding:32px;
    border-radius:14px;
    border-top:8px solid var(--blue-2);
    box-shadow:0 8px 20px rgba(6,24,49,0.07);
    max-width:1000px;
    width:100%;
  }

  .card h2{
    margin:20px 0 10px;
    color:var(--blue-1);
  }

  label{
    font-weight:600;
    color:var(--blue-1);
  }

  select{
    width:100%;
    margin-top:6px;
    padding:12px;
    border-radius:8px;
    border:1px solid #ccc;
    margin-bottom:14px;
    font-size:16px;
  }

  button{
    background:var(--accent);
    border:none;
    padding:12px 22px;
    border-radius:8px;
    font-weight:bold;
    cursor:pointer;
    font-size:16px;
  }

  .msg{
    margin-top:16px;
    padding:14px;
    background:#ffe9e9;
    border-left:4px solid #c30000;
    color:#7a0000;
    display:none;
    border-radius:6px;
    font-size:15px;
  }

  table{
    width:100%;
    border-collapse:collapse;
    margin-top:30px;
  }

  th, td{
    padding:14px;
    border-bottom:1px solid #ddd;
    text-align:left;
    font-size:15px;
  }

  th{
    background:#eaf1ff;
    color:var(--blue-1);
    font-weight:700;
  }

  footer{
    background:var(--blue-1);
    color:white;
    text-align:center;
    padding:12px 0;
    font-size:14px;
  }
</style>

</head>
<body>

<header>
  <h1>Relatório de Ocupação por Curso</h1>
</header>

<main>
  <div class="card">

    <label for="curso">Selecione o curso:</label>
    <select id="curso">
      <option value="">-- Escolha --</option>
      <!-- Os cursos serão carregados pelo backend via JS -->
    </select>

    <button onclick="gerarRelatorio()">Gerar Relatório</button>

    <div class="msg" id="mensagem"></div>

    <div id="resultado"></div>

  </div>
</main>

<footer>
  Sistema de Alocação de Salas — PUC Minas © 2025
</footer>

<script>

/* ===========================================
   FUNÇÃO PARA CARREGAR CURSOS DO BACK-END
   =========================================== */
// Exemplo de como você vai trazer os cursos
// Basta substituir por uma chamada à API:

async function carregarCursos() {
  // EXEMPLO:
  // const resposta = await fetch("/api/cursos");
  // const cursos = await resposta.json();

  const cursos = []; // ← vazio por enquanto (sem nomes)

  const select = document.getElementById("curso");
  cursos.forEach(c => {
    const op = document.createElement("option");
    op.value = c.id;
    op.textContent = c.nome;
    select.appendChild(op);
  });
}

// Chama ao carregar página
carregarCursos();



/* ===========================================
   FUNÇÃO PARA GERAR RELATÓRIO
   =========================================== */

async function gerarRelatorio(){
  const cursoId = document.getElementById("curso").value;
  const msg = document.getElementById("mensagem");
  const resultado = document.getElementById("resultado");

  msg.style.display = "none";
  resultado.innerHTML = "";

  if(!cursoId){
    msg.textContent = "Selecione um curso.";
    msg.style.display = "block";
    return;
  }

  /* ===========================================
     AQUI VOCÊ VAI BUSCAR OS RESULTADOS NO BANCO
     =========================================== */
  
  // Exemplo (substituir pela sua rota):
  // const resposta = await fetch(`/api/relatorio-curso?id=${cursoId}`);
  // const relatorio = await resposta.json();

  const relatorio = []; 
  // ← vazio porque não estamos usando dados falsos.

  if(relatorio.length === 0){
    msg.textContent = "Nenhuma alocação encontrada para este curso.";
    msg.style.display = "block";
    return;
  }

  /* Montagem da tabela */
  let html = `
    <h2>Resultados</h2>
    <table>
      <tr>
        <th>Disciplina</th>
        <th>Professor</th>
        <th>Sala</th>
        <th>Horário</th>
      </tr>
  `;

  relatorio.forEach(item => {
    html += `
      <tr>
        <td>${item.disciplina}</td>
        <td>${item.professor}</td>
        <td>${item.sala}</td>
        <td>${item.horario}</td>
      </tr>
    `;
  });

  html += "</table>";
  resultado.innerHTML = html;
}

</script>

</body>
</html>
